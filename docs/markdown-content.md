# マークダウンコンテンツ

このドキュメントでは、my-web-pageプロジェクトでのマークダウンコンテンツの管理と読み込み方法について説明します。

## 概要

my-web-pageでは、ホームページとプロフィール・CVページのコンテンツをマークダウン形式で管理しています。これにより、HTMLを直接編集することなく、コンテンツを簡単に更新できます。また、多言語対応（日本語/英語）のコンテンツも言語ごとに別々のマークダウンファイルで管理しています。

## マークダウンファイルの構造

マークダウンファイルは `public/markdown` ディレクトリに配置されています。

```
public/markdown/
├── home.md                # ホームページのデフォルトコンテンツ
├── profilecv.md           # プロフィール・CVページのデフォルトコンテンツ
├── en/                    # 英語版コンテンツ
│   ├── home.md            # 英語版ホームページ
│   ├── profilecv.md       # 英語版プロフィール・CVページ
│   ├── works.md           # 英語版仕事ページ
│   └── works/             # 英語版業務詳細ページ
│       └── computer-system-2025.md # コンピュータシステム2025（英語）
└── ja/                    # 日本語版コンテンツ
    ├── home.md            # 日本語版ホームページ
    ├── profilecv.md       # 日本語版プロフィール・CVページ
    ├── works.md       # 日本語版仕事ページ
    └── works/             # 日本語版業務詳細ページ
        └── computer-system-2025.md # コンピュータシステム2025（日本語）
```

## マークダウンローダーユーティリティ

マークダウンファイルを読み込むために、`src/utils/markdownLoader.ts` ユーティリティが実装されています。

### markdownLoader.ts

### 主な機能

- **言語に応じたパス生成**: 現在の言語設定に基づいて、適切なマークダウンファイルのパスを生成します。
- **フォールバック機能**: 言語固有のファイル（例: `public/markdown/ja/some-page.md`）が存在しない場合は、ルートの `public/markdown/` ディレクトリにある同名のファイル（例: `public/markdown/some-page.md`）にフォールバックします。
- **エラーハンドリング**: ファイルの読み込みに失敗した場合は、エラーメッセージを表示します。

## マークダウンの使用方法

ページコンポーネント (`Home.tsx`, `ProfileCV.tsx`, `Works.tsx`, `ComputerSystem2025.tsx` など) では、`useEffect` フック内で `loadMarkdown` ユーティリティを呼び出し、取得したマークダウンコンテンツを状態変数にセットします。`ReactMarkdown` コンポーネントを使用して、取得したコンテンツをレンダリングします。言語が変更された際には、`useEffect` の依存配列に `language` を含めることで、コンテンツが再読み込みされるようにします。

## マークダウンコンテンツの更新方法

マークダウンコンテンツを更新するには、以下の手順に従ってください：

1. 対応する言語のディレクトリ内のマークダウンファイルを編集します。
   - 日本語コンテンツ: `public/markdown/ja/`
   - 英語コンテンツ: `public/markdown/en/`

2. 変更を保存すると、アプリケーションは自動的に新しいコンテンツを読み込みます（開発サーバーが実行中の場合）。

3. 本番環境にデプロイする場合は、変更したファイルをコミットしてデプロイします。

## マークダウンのテスト
マークダウンローダーの機能は、`src/__tests__/markdownLoader.test.ts`でテストされています。テストでは以下の点を確認しています：

- 言語固有のマークダウンファイルが正しく読み込まれるか
- ファイルが存在しない場合のフォールバック機能が正しく動作するか
- エラーハンドリングが適切に行われるか
- サブディレクトリを含むパスのマークダウンファイルが正しく読み込まれるか
- 複数階層のサブディレクトリを含むパスのマークダウンファイルが正しく読み込まれるか

テストの詳細については、[テスト戦略](./testing-strategy.md)のドキュメントを参照してください。

## マークダウン機能の拡張

現在のマークダウン実装は基本的な機能のみをサポートしていますが、以下のような拡張が可能です：

1. **カスタムコンポーネント**: ReactMarkdownの `components` プロパティを使用して、カスタムコンポーネントでマークダウン要素をレンダリングできます。
2. **プラグイン**: ReactMarkdownは様々なプラグインをサポートしています。例えば、数式やシンタックスハイライトなどの機能を追加できます (`remark-gfm`, `remark-math`, `rehype-katex` など)。
3. **画像の最適化**: 画像パスを処理して、最適化された画像を提供することができます。

## 注意点

- マークダウンファイルは `public` ディレクトリに配置されているため、ビルド時に最適化されません。大量のマークダウンコンテンツがある場合は、パフォーマンスに影響する可能性があります。
- マークダウンコンテンツにスタイルを適用する場合は、グローバルCSSまたはインラインスタイルを使用する必要があります。
- 現在の実装では、マークダウンファイルは非同期で読み込まれるため、読み込み中の状態を適切に処理する必要があります。