# 多言語対応

このドキュメントでは、my-web-pageプロジェクトの多言語対応（日本語/英語）の実装について説明します。

## 概要

my-web-pageは、日本語と英語の2つの言語をサポートしています。言語切り替え機能は以下のコンポーネントで構成されています：

1. **LanguageContext**: 言語状態を管理するReactコンテキスト
2. **useLanguage**: 言語コンテキストを使用するためのカスタムフック
3. **locales**: 各言語のテキストリソースを定義するファイル
4. **言語固有のマークダウンファイル**: 各言語のコンテンツを格納するマークダウンファイル

## 言語コンテキスト

言語コンテキストは、アプリケーション全体で言語設定を共有するために使用されます。

### LanguageContext.tsx

`src/contexts/LanguageContext.tsx` で定義されています。

### 主な機能

- **言語状態の管理**: `language` 状態変数で現在の言語（'ja'または'en'）を管理します。
- **ローカルストレージとの連携**: ユーザーの言語設定をローカルストレージに保存し、ページ再読み込み後も設定を維持します。
- **言語切り替え機能**: `toggleLanguage` 関数で日本語と英語を切り替えます。
- **コンテキストプロバイダー**: アプリケーション全体で言語設定を共有するためのプロバイダーを提供します。
- **カスタムフック**: `useLanguage` フックでコンポーネントから言語設定にアクセスできます。

## 言語リソース

言語リソースは、`src/locales` ディレクトリ内の言語ファイルで定義されています。

### locales/index.ts

`src/locales/index.ts` で各言語のリソースをまとめてエクスポートしています。

### locales/ja.ts（日本語リソース）

`src/locales/ja.ts` に日本語のテキストリソースが定義されています。

### locales/en.ts（英語リソース）

`src/locales/en.ts` に英語のテキストリソースが定義されています。

## 言語リソースの使用方法

コンポーネント内では `useLanguage` フックで現在の言語を取得し、`locales` オブジェクトから対応する言語のテキストを取得して使用します。

## 言語切り替えボタンの実装

ヘッダーコンポーネントなどでは `useLanguage` フックから `toggleLanguage` 関数を取得し、ボタンのクリックイベントなどで呼び出すことで言語を切り替えます。

## 言語固有のマークダウンコンテンツ

マークダウンコンテンツも多言語対応しています。詳細は[マークダウンコンテンツ](./markdown-content.md)のドキュメントを参照してください。

## 多言語対応のテスト

多言語対応の機能は、`src/__tests__/LanguageContext.test.tsx`でテストされています。テストでは以下の点を確認しています：

- デフォルト言語が正しく設定されるか
- 言語切り替え機能が正しく動作するか
- ローカルストレージに言語設定が保存されるか

テストの詳細については、[テスト戦略](./testing-strategy.md)のドキュメントを参照してください。

## 多言語対応の拡張

新しい言語を追加する場合は、以下の手順に従ってください：

1. `src/locales` ディレクトリに新しい言語ファイル（例：`fr.ts`）を作成します。
2. `src/locales/index.ts` に新しい言語を追加します。
3. `public/markdown` ディレクトリに新しい言語のサブディレクトリ（例：`fr`）を作成し、マークダウンファイルを追加します。
4. `LanguageContext.tsx` の `toggleLanguage` 関数を修正して、複数の言語間で切り替えられるようにします。

## 注意点

- 言語切り替えはクライアントサイドで行われるため、SEO対策が必要な場合は追加の対応が必要です。
- 現在のシステムは2言語のみをサポートしていますが、3言語以上に拡張する場合は、`toggleLanguage` 関数の修正が必要です。